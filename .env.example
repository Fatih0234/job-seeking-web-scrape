# Local development environment variables (examples).
#
# This repo supports two ways to configure the Postgres connection:
# 1) SUPABASE_DB_URL (single connection string)
# 2) SUPABASE_HOST/PORT/DATABASE/USER/PASSWORD (recommended; assembled in code)
#
# Note: Do NOT commit real credentials. Use this file as a template and put real
# values in `.env` (which is gitignored).

# -----------------------------------------------------------------------------
# Supabase Postgres (recommended: individual fields)
# -----------------------------------------------------------------------------
SUPABASE_HOST=db.<your-project-ref>.supabase.co
SUPABASE_PORT=5432
SUPABASE_DATABASE=postgres
SUPABASE_USER=postgres
SUPABASE_PASSWORD=your_supabase_password_here
# Optional (defaults to "require"):
SUPABASE_SSLMODE=require

# -----------------------------------------------------------------------------
# Supabase Postgres (optional: single URL form)
# -----------------------------------------------------------------------------
# If set, this takes precedence over the individual fields above.
SUPABASE_DB_URL=postgresql://postgres:your_supabase_password_here@db.<your-project-ref>.supabase.co:5432/postgres?sslmode=require

# -----------------------------------------------------------------------------
# Optional: used by a future web UI (not required for crawlers)
# -----------------------------------------------------------------------------
NEXT_PUBLIC_SUPABASE_URL=https://<your-project-ref>.supabase.co
NEXT_PUBLIC_SUPABASE_ANON_KEY=your_anon_key_here

# -----------------------------------------------------------------------------
# Crawl budgets (optional; leave empty to use defaults in code)
# -----------------------------------------------------------------------------
MAX_PAGES_PER_SEARCH=50
MAX_JOBS_DISCOVERED_PER_SEARCH=2000
MAX_JOB_DETAILS_PER_RUN=200
DETAIL_STALENESS_DAYS=7
# Cooldown before retrying blocked detail pages
DETAIL_BLOCKED_RETRY_HOURS=24
CIRCUIT_BREAKER_BLOCKS=3
DUPLICATE_PAGE_LIMIT=3
DETAIL_DEBUG_FAILURE_LIMIT=5
# Optional: allow a one-time Playwright-rendered fallback if HTML parsing fails
DETAIL_ALLOW_PLAYWRIGHT_FALLBACK=0

# Optional: pipeline toggles
RUN_DISCOVERY=1
RUN_DETAILS=1

# -----------------------------------------------------------------------------
# Discovery date-posted policy (LinkedIn f_TPR)
# -----------------------------------------------------------------------------
# - auto_if_any_time: if stored f_TPR is missing/empty, choose a window based on history
# - static: do not override stored f_TPR (still normalizes empty -> omitted)
DISCOVERY_TPR_POLICY=auto_if_any_time
DISCOVERY_TPR_RECENT_HOURS=30
DISCOVERY_TPR_RECENT_CODE=r86400
DISCOVERY_TPR_FALLBACK_CODE=r604800
# Optional: set to any non-empty value to print per-search decisions to stderr
DISCOVERY_TPR_DEBUG=
